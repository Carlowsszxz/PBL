<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/UMak_Logo_Registered.png">
    <title>LCD Messages - Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="styles/login.css">
    <link rel="stylesheet" href="styles/setup.css">
    <link rel="stylesheet" href="styles/lcd-messages.css">
    <style>
            background: linear-gradient(135deg, rgba(26, 26, 36, 0.95) 0%, rgba(31, 31, 46, 0.95) 100%) !important;
            border: 1px solid rgba(60, 60, 80, 0.4) !important;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Disable hover effects on cards */
        .admin-card:hover {
            transform: none !important;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1) !important;
        }

            background: linear-gradient(135deg, rgba(26, 26, 36, 0.95) 0%, rgba(31, 31, 46, 0.95) 100%) !important;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.3) !important;
            transform: none !important;
        }
    </style>
</head>

<body class="text-slate-900 min-h-screen flex flex-col relative setup-body-bg" data-page="lcd-messages">
    <!-- Visual Effects -->
    <div id="cursor-follower" class="cursor-follower" aria-hidden="true"></div>
    <div id="library-background" class="library-background" aria-hidden="true"></div>
    <div id="paper-background" class="paper-background" aria-hidden="true"></div>


    <div class="admin-layout-container">
        <aside id="adminSidebar" class="admin-sidebar">
            <div class="sidebar-header">
                <img src="images/UMak_Logo_Registered.png" alt="University of Makati Logo" class="sidebar-logo" />
                <h1 class="sidebar-title">Admin Dashboard</h1>
            </div>
            <nav class="sidebar-nav">
                <a href="setup.html" class="admin-nav-link" aria-label="Admin Dashboard"><i data-lucide="settings"
                        class="admin-nav-icon"></i><span class="admin-nav-text">Dashboard</span></a>
                <a href="user-management.html" class="admin-nav-link" aria-label="User Management"><i
                        data-lucide="users" class="admin-nav-icon"></i><span class="admin-nav-text">Users</span></a>
                <a href="rfid-management.html" class="admin-nav-link" aria-label="RFID Management"><i
                        data-lucide="contact" class="admin-nav-icon"></i><span class="admin-nav-text">Devices</span></a>
                <a href="student-reports.html" class="admin-nav-link" aria-label="Student Reports"><i
                        data-lucide="book-open-check" class="admin-nav-icon"></i><span
                        class="admin-nav-text">Reports</span></a>
                <a href="activity-logs.html" class="admin-nav-link" aria-label="Activity Logs"><i data-lucide="list"
                        class="admin-nav-icon"></i><span class="admin-nav-text">Activity</span></a>
                <a href="lcd-messages.html" class="admin-nav-link active" aria-label="LCD Messages"><i data-lucide="tv"
                        class="admin-nav-icon"></i><span class="admin-nav-text">LCD Messages</span></a>
            </nav>
            <div class="sidebar-footer">
                <a href="#" onclick="logout(); return false;" class="admin-nav-link logout-item" aria-label="Logout"><i
                        data-lucide="log-out" class="admin-nav-icon"></i><span class="admin-nav-text">Logout</span></a>
            </div>
        </aside>
        <main class="admin-main-content">
            <header class="admin-top-nav">
                <div class="top-nav-left">
                    <button id="sidebarToggle" class="sidebar-toggle-btn" aria-label="Toggle sidebar"
                        aria-expanded="false" aria-controls="adminSidebar"><i data-lucide="menu"
                            class="w-5 h-5"></i></button>
                    <h1 class="page-title">LCD Messages</h1>
                </div>
                <div class="top-nav-right">
                    <div class="top-nav-profile">
                        <div class="profile-avatar">A</div>
                    </div>
                </div>
            </header>
            <div class="admin-content-grid">

                <!-- Send Message Card -->
                <section class="admin-card card-fadein lcd-messages-full-width">
                    <div class="admin-card-header">
                        <h2 class="text-lg font-semibold setup-title-color">Send Message to LCD Screen</h2>
                    </div>
                    <p class="text-slate-600 mb-6">Type a message below to display on the ESP32 LCD screen (20
                        characters per line, 4 lines).</p>
                    <form id="messageForm" class="message-form">
                        <div class="form-group">
                            <label for="tableSelect" class="form-label">Select Table:</label>
                            <select id="tableSelect" class="table-select">
                                <option value="table-1">Table 1</option>
                                <option value="table-2" disabled>Table 2 (Future Expansion)</option>
                                <option value="table-3" disabled>Table 3 (Future Expansion)</option>
                                <option value="table-4" disabled>Table 4 (Future Expansion)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="messageInput" class="form-label">Message (max 80 characters, 4 lines):</label>
                            <textarea id="messageInput"
                                placeholder="Enter your message here...&#10;Example:&#10;Welcome to Lab!&#10;Please maintain&#10;quiet environment"
                                maxlength="80"></textarea>
                            <div class="character-count"><span id="charCount">0</span> / 80 characters</div>
                        </div>

                        <div class="checkbox-group"><label><input type="checkbox" id="priorityCheck"> Priority (display
                                immediately, override current screen)</label></div>

                        <div class="checkbox-group"><label><input type="number" id="displayDuration" value="10" min="1"
                                    max="300" class="duration-input"> Display Duration (seconds, 1-300)</label></div>

                        <div class="button-group flex gap-3 flex-wrap">
                            <button type="submit" class="setup-btn btn btn-primary">Send to LCD</button>
                            <button type="button" onclick="clearMessage()"
                                class="px-5 py-3 rounded-xl bg-slate-200 hover:bg-slate-300 text-slate-800 font-semibold shadow">Clear
                                Message</button>
                        </div>
                    </form>

                    <div id="messagePreview" class="message-preview hidden">
                        <div class="preview-label">LCD Preview (20 chars Ã— 4 lines):</div>
                        <div id="previewContent"></div>
                    </div>

                    <div id="messageStatus" class="message-status hidden"></div>
                </section>

                <!-- Recent Messages Card -->
                <section class="admin-card card-fadein lcd-messages-full-width">
                    <div class="admin-card-header flex items-center justify-between">
                        <h2 class="text-lg font-semibold setup-title-color">Recent Messages</h2>
                        <button onclick="loadMessages()" class="btn btn-sm setup-btn"
                            aria-label="Refresh messages list">
                            <i data-lucide="refresh-cw"></i>
                            Refresh
                        </button>
                    </div>
                    <div id="messageList" class="message-list">
                        <p>Loading messages...</p>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="scripts/login-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="scripts/lcd-messages.js"></script>
</body>

</html>
